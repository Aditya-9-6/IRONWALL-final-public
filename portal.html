<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IronWall | Global Security Operations</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: { 800: '#1E293B', 900: '#0F172A', 950: '#020617' },
                        gold: { 400: '#FCD34D', 500: '#D4AF37', 600: '#B45309' },
                    },
                    fontFamily: { cinzel: ['Cinzel', 'serif'], inter: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-glow': 'pulseGlow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'slide-up': 'slideUp 0.5s ease-out forwards',
                        'slide-in-right': 'slideInRight 0.3s ease-out forwards',
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } },
                        pulseGlow: { '0%, 100%': { opacity: 1, boxShadow: '0 0 0px #D4AF37' }, '50%': { opacity: .8, boxShadow: '0 0 20px #D4AF37' } },
                        slideUp: { '0%': { opacity: 0, transform: 'translateY(20px)' }, '100%': { opacity: 1, transform: 'translateY(0)' } },
                        slideInRight: { '0%': { opacity: 0, transform: 'translateX(20px)' }, '100%': { opacity: 1, transform: 'translateX(0)' } }
                    }
                }
            }
        }
    </script>

    <style>
        /* Premium Polish */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8FAFC;
            color: #0F172A;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 1);
            box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 50px -10px rgba(0, 0, 0, 0.1);
        }

        .btn-press {
            transition: transform 0.1s;
        }

        .btn-press:active {
            transform: scale(0.95);
        }

        /* Toast Notification */
        #toast-container {
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .toast {
            background: #0F172A;
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            border-left: 4px solid #D4AF37;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            font-size: 14px;
            animation: slideInRight 0.3s forwards;
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 300px;
        }
    </style>
</head>

<body class="overflow-x-hidden antialiased">

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- FaceAPI & Config -->
    <script defer src="https://cdn.jsdelivr.net/npm/@vladmandic/face-api/dist/face-api.min.js"></script>
    <script type="module">import { IronEye } from './static/ironEye.js'; window.IronEye = IronEye;</script>
    <script>
        const CONFIG = { apiBase: window.location.hostname === 'localhost' ? "http://localhost:8000" : window.location.origin };
    </script>

    <!-- ======================= -->
    <!-- VIEW A: LANDING PAGE    -->
    <!-- ======================= -->
    <div id="view-landing" class="min-h-screen flex flex-col bg-white relative">

        <!-- Live Status Ticker -->
        <div
            class="bg-navy-950 text-gray-400 text-[10px] py-1 px-4 flex justify-between items-center border-b border-white/5">
            <div class="flex gap-4">
                <span class="text-green-500 font-bold"><i class="fa-solid fa-circle text-[6px] mr-1 align-middle"></i>
                    SYSTEMS ONLINE</span>
                <span><i class="fa-solid fa-server mr-1"></i> US-EAST-1: 12ms</span>
                <span><i class="fa-solid fa-server mr-1"></i> EU-WEST-2: 24ms</span>
                <span class="text-gold-500 font-bold animate-pulse"><i class="fa-solid fa-shield-halved mr-1"></i>
                    GLOBAL THREAT LEVEL: ELEVATED</span>
            </div>
            <div class="font-mono" id="clock-ticker">00:00:00 UTC</div>
        </div>

        <!-- Navigation -->
        <nav
            class="w-full px-6 py-4 flex justify-between items-center bg-white/90 backdrop-blur-md sticky top-0 z-50 border-b border-gray-100 shadow-sm transition-all duration-300">
            <div class="flex items-center gap-3">
                <div class="relative">
                    <img src="/static/logo.png" onerror="this.src='https://via.placeholder.com/40'"
                        class="h-10 w-10 rounded-lg shadow-lg z-10 relative object-cover bg-navy-900 border border-gold-500/20"
                        alt="IronWall">
                    <div class="absolute inset-0 bg-gold-500 blur-lg opacity-20 animate-pulse"></div>
                </div>
                <span class="font-cinzel text-xl font-bold text-navy-900 tracking-wider">IRONWALL</span>
            </div>
            <div class="flex items-center gap-6">
                <a href="#features"
                    class="hidden md:block text-sm font-medium text-navy-800 hover:text-gold-600 transition-colors uppercase tracking-wide text-xs font-bold">Services</a>
                <a href="#pricing"
                    class="hidden md:block text-sm font-medium text-navy-800 hover:text-gold-600 transition-colors uppercase tracking-wide text-xs font-bold">Pricing</a>
                <button onclick="app.openLogin()"
                    class="btn-press px-6 py-2.5 rounded-lg bg-navy-900 text-white font-bold text-xs uppercase tracking-wider shadow-lg hover:bg-navy-800 hover:shadow-gold/20 transition-all flex items-center gap-2">
                    <i class="fa-solid fa-terminal text-gold-500"></i> Console Access
                </button>
            </div>
        </nav>

        <!-- Hero Section -->
        <header
            class="flex-1 flex flex-col justify-center items-center text-center px-6 py-24 relative overflow-hidden">
            <!-- Animated Background -->
            <div
                class="absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[800px] bg-gold-400/10 rounded-full blur-3xl -z-10 animate-float">
            </div>
            <div class="absolute bottom-0 right-0 w-[500px] h-[500px] bg-blue-600/5 rounded-full blur-3xl -z-10"></div>

            <div
                class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white border border-gray-200 text-navy-800 text-xs font-bold mb-8 shadow-sm animate-slide-up hover:border-gold-500 transition-colors cursor-default">
                <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> V2.1 PRIME IS LIVE
            </div>

            <h1 class="font-cinzel text-5xl md:text-7xl font-bold text-navy-900 mb-6 leading-tight max-w-5xl animate-slide-up"
                style="animation-delay: 0.1s">
                The Firewall That <br> <span
                    class="bg-clip-text text-transparent bg-gradient-to-r from-gold-500 via-gold-600 to-navy-900">Refuses
                    to Die.</span>
            </h1>

            <p class="text-navy-800/70 text-lg max-w-2xl mb-12 animate-slide-up font-light leading-relaxed"
                style="animation-delay: 0.2s">
                Advanced persistent threat protection for high-value financial infrastructure.
                Secure your assets with military-grade encryption and AI-driven active defense.
            </p>

            <div class="flex gap-4 animate-slide-up" style="animation-delay: 0.3s">
                <button onclick="app.scrollToPricing()"
                    class="btn-press px-8 py-4 bg-gold-500 text-white rounded-xl font-bold shadow-xl shadow-gold/30 hover:bg-gold-600 transition-all flex items-center gap-3 text-sm uppercase tracking-wide">
                    Start Protection <i class="fa-solid fa-shield-halved animate-bounce"></i>
                </button>
                <button onclick="app.openLogin()"
                    class="btn-press px-8 py-4 bg-white border border-gray-200 text-navy-900 rounded-xl font-bold hover:bg-gray-50 hover:border-navy-300 transition-all text-sm uppercase tracking-wide flex items-center gap-3">
                    <i class="fa-solid fa-play"></i> Live Demo
                </button>
            </div>

            <!-- Dashboard Preview Image (Visual Anchor) -->
            <div class="mt-20 relative w-full max-w-5xl animate-slide-up group cursor-pointer"
                style="animation-delay: 0.5s" onclick="app.openLogin()">
                <div
                    class="absolute -inset-1 bg-gradient-to-r from-gold-500 to-navy-900 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-1000">
                </div>
                <div
                    class="relative bg-white border border-gray-200 rounded-xl shadow-2xl overflow-hidden aspect-video flex items-center justify-center bg-gray-50">
                    <div class="text-center">
                        <div
                            class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse">
                            <i class="fa-solid fa-lock text-4xl text-gray-300"></i>
                        </div>
                        <p class="text-gray-400 font-bold font-cinzel tracking-widest">SECURE PREVIEW LOCKED</p>
                        <p class="text-xs text-gray-400 mt-2">Login to access live telemetry</p>
                    </div>
                </div>
            </div>
        </header>

        <!-- PRICING SECTION -->
        <section id="pricing" class="bg-gray-50 py-24 border-t border-gray-200">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="font-cinzel text-3xl md:text-4xl font-bold text-navy-900 mb-4">Strategic Deployment Plans
                    </h2>
                    <p class="text-gray-500 max-w-xl mx-auto">Choose the level of defense that matches your threat
                        profile.</p>
                </div>

                <div class="grid md:grid-cols-3 gap-8 max-w-6xl mx-auto items-center">
                    <!-- Standard -->
                    <div class="glass-card p-8 rounded-2xl h-fit border-t-4 border-gray-200">
                        <h3 class="font-cinzel text-xl font-bold text-gray-500 mb-2">Sentry</h3>
                        <div class="flex items-baseline mb-4">
                            <span class="text-4xl font-bold text-navy-900">$49</span>
                            <span class="text-gray-500 ml-2">/mo</span>
                        </div>
                        <ul class="space-y-4 text-sm text-gray-600 mb-8">
                            <li class="flex gap-3 items-center"><i class="fa-solid fa-circle-check text-green-500"></i>
                                Basic WAF Ruleset</li>
                            <li class="flex gap-3 items-center"><i class="fa-solid fa-circle-check text-green-500"></i>
                                500k Requests/mo</li>
                            <li class="flex gap-3 items-center"><i class="fa-solid fa-circle-check text-green-500"></i>
                                Email Support</li>
                        </ul>
                        <button onclick="app.showToast('Select a plan in the Dashboard to subscribe.', 'info')"
                            class="btn-press w-full py-3 border-2 border-gray-200 rounded-xl font-bold text-navy-900 hover:border-navy-900 hover:bg-navy-900 hover:text-white transition-all text-sm">Deploy
                            Sentry</button>
                    </div>

                    <!-- Vault (Best) -->
                    <div
                        class="bg-navy-900 skew-y-0 p-8 rounded-2xl shadow-2xl relative transform md:-translate-y-4 border border-navy-700 overflow-hidden group">
                        <!-- Shine Effect -->
                        <div
                            class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover:animate-[shimmer_2s_infinite]">
                        </div>

                        <div
                            class="absolute top-0 right-0 bg-gold-500 text-white text-[10px] font-bold px-3 py-1 rounded-bl-lg rounded-tr-xl">
                            MOST POPULAR</div>
                        <h3 class="font-cinzel text-xl font-bold text-gold-500 mb-2">IronVault</h3>
                        <div class="flex items-baseline mb-4">
                            <span class="text-5xl font-bold text-white">$499</span>
                            <span class="text-gray-400 ml-2">/mo</span>
                        </div>
                        <ul class="space-y-4 text-sm text-gray-300 mb-8">
                            <li class="flex gap-3 items-center"><i class="fa-solid fa-shield-halved text-gold-500"></i>
                                <strong>AI Neural Shield™</strong>
                            </li>
                            <li class="flex gap-3 items-center"><i class="fa-solid fa-infinity text-gold-500"></i>
                                Unlimited Bandwidth</li>
                            <li class="flex gap-3 items-center"><i class="fa-solid fa-fingerprint text-gold-500"></i>
                                Biometric Console</li>
                            <li class="flex gap-3 items-center"><i class="fa-solid fa-user-secret text-gold-500"></i>
                                <span class="text-white font-bold">Priority Red Team Access</span>
                            </li>
                        </ul>
                        <button onclick="app.showToast('Please login to upgrade to Vault status.', 'warning')"
                            class="btn-press w-full py-4 bg-gold-500 text-white rounded-xl font-bold shadow-lg shadow-gold/20 hover:bg-gold-400 transition-all text-sm tracking-wide">
                            ENTER THE VAULT
                        </button>
                    </div>

                    <!-- Surge (Pay as you go) -->
                    <div class="glass-card p-8 rounded-2xl h-fit border-t-4 border-red-500">
                        <h3 class="font-cinzel text-xl font-bold text-navy-900 mb-2">War Room</h3>
                        <div class="flex items-baseline mb-4">
                            <span class="text-4xl font-bold text-navy-900">$0</span>
                            <span class="text-gray-500 ml-2">/standby</span>
                        </div>

                        <div class="bg-red-50 p-4 rounded-xl mb-6 border border-red-100">
                            <div class="flex justify-between text-sm mb-1">
                                <span class="font-bold text-navy-800">Surge Rate</span>
                                <span class="font-bold text-red-600">$5.00</span>
                            </div>
                            <div class="text-[10px] text-gray-500 text-right">per 5,000 requests</div>
                        </div>

                        <ul class="space-y-4 text-sm text-gray-600 mb-8">
                            <li class="flex gap-3 items-center"><i class="fa-solid fa-bolt text-red-500"></i> Instant
                                Auto-Scaling</li>
                            <li class="flex gap-3 items-center"><i class="fa-solid fa-network-wired text-red-500"></i>
                                DDoS Mitigation</li>
                        </ul>
                        <button onclick="app.showToast('Configure Scaling Policies in Console.', 'info')"
                            class="btn-press w-full py-3 border-2 border-navy-900 text-navy-900 rounded-xl font-bold hover:bg-navy-900 hover:text-white transition-all text-sm">Configure
                            War Room</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-navy-950 text-slate-400 py-12 text-sm border-t border-white/5">
            <div class="container mx-auto px-6 text-center">
                <div class="font-cinzel font-bold text-white text-2xl mb-4">IRONWALL</div>
                <p class="opacity-50 text-xs">&copy; 2026 IronWall Technologies. Safeguarding the future.</p>
            </div>
        </footer>
    </div>


    <!-- ======================= -->
    <!-- VIEW B: DASHBOARD (SAAS)-->
    <!-- ======================= -->
    <div id="view-dashboard"
        class="hidden min-h-screen bg-navy-50 flex font-inter opacity-0 transition-opacity duration-500">

        <!-- SIDEBAR -->
        <aside
            class="w-64 bg-navy-900 text-white flex flex-col fixed h-full z-50 transition-all duration-300 shadow-2xl border-r border-white/5">
            <div class="h-16 flex items-center px-6 border-b border-white/5 bg-navy-950">
                <img src="/static/logo.png" class="h-8 w-8 rounded mr-3 shadow-gold"
                    onerror="this.src='https://via.placeholder.com/32'">
                <span class="font-cinzel font-bold tracking-widest text-lg">CONSOLE</span>
            </div>

            <nav class="flex-1 px-4 py-8 space-y-2">
                <button onclick="app.switchTab('overview')" id="nav-overview"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold bg-gold-500 text-navy-900 shadow-lg shadow-gold/20 transition-all">
                    <i class="fa-solid fa-chart-line"></i> Overview
                </button>
                <button onclick="app.switchTab('infra')" id="nav-infra"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold text-gray-400 hover:text-white hover:bg-white/5 transition-all">
                    <i class="fa-solid fa-server"></i> Infrastructure
                </button>
                <button onclick="app.switchTab('deploy')" id="nav-deploy"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold text-gray-400 hover:text-white hover:bg-white/5 transition-all">
                    <i class="fa-solid fa-rocket"></i> Deployments
                </button>
                <button onclick="app.switchTab('billing')" id="nav-billing"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold text-gray-400 hover:text-white hover:bg-white/5 transition-all">
                    <i class="fa-solid fa-credit-card"></i> Billing & Plans
                </button>

                <div class="pt-8 pb-2 text-[10px] text-gray-500 font-bold uppercase tracking-wider px-2">Security
                    Controls</div>
                <button onclick="app.switchTab('shields')" id="nav-shields"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold text-gray-400 hover:text-white hover:bg-white/5 transition-all group">
                    <i class="fa-solid fa-shield-halved group-hover:text-gold-500"></i> Active Shields
                </button>
            </nav>

            <div class="p-4 border-t border-white/5 bg-navy-950">
                <div class="flex items-center gap-3 px-2">
                    <div
                        class="w-8 h-8 rounded-full bg-gradient-to-tr from-gold-400 to-gold-600 flex items-center justify-center text-xs font-bold text-navy-900">
                        A</div>
                    <div class="flex-1 min-w-0">
                        <div class="text-sm font-bold truncate" id="user-welcome-sidebar">Admin User</div>
                        <div class="text-[10px] text-gray-500 truncate">Pro Plan</div>
                    </div>
                    <button onclick="app.logout()" class="text-gray-400 hover:text-white"><i
                            class="fa-solid fa-arrow-right-from-bracket"></i></button>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT AREA -->
        <main class="flex-1 ml-64 p-8 overflow-y-auto h-screen bg-gray-50/50">
            <!-- Header -->
            <header class="flex justify-between items-center mb-8">
                <div>
                    <h1 class="text-2xl font-bold text-navy-900" id="page-title">Mission Control</h1>
                    <p class="text-sm text-gray-500" id="page-subtitle">Real-time telemetry and command authority.</p>
                </div>
                <div class="flex items-center gap-3 bg-white px-4 py-2 rounded-xl border border-gray-200 shadow-sm">
                    <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                    <span class="text-xs font-bold text-navy-900">Systems Nominal</span>
                    <span class="text-gray-300">|</span>
                    <span class="text-xs text-gray-500 font-mono" id="clock-dashboard">00:00:00 UTC</span>
                </div>
            </header>

            <!-- TAB: OVERVIEW (Original Dashboard) -->
            <section id="tab-overview" class="space-y-6 tab-view animate-fade-in">
                <!-- Stat Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div class="bg-white p-5 rounded-xl border border-gray-100 shadow-sm flex items-center gap-4">
                        <div
                            class="w-12 h-12 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center text-xl">
                            <i class="fa-solid fa-globe"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-navy-900">3</div>
                            <div class="text-xs text-gray-500 font-bold uppercase">Active Sites</div>
                        </div>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-gray-100 shadow-sm flex items-center gap-4">
                        <div
                            class="w-12 h-12 rounded-lg bg-green-50 text-green-600 flex items-center justify-center text-xl">
                            <i class="fa-solid fa-check-double"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-navy-900">99.99%</div>
                            <div class="text-xs text-gray-500 font-bold uppercase">Uptime</div>
                        </div>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-gray-100 shadow-sm flex items-center gap-4">
                        <div
                            class="w-12 h-12 rounded-lg bg-red-50 text-red-600 flex items-center justify-center text-xl">
                            <i class="fa-solid fa-bug-slash"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-navy-900" id="stat-blocked">1,420</div>
                            <div class="text-xs text-gray-500 font-bold uppercase">Threats Blocked</div>
                        </div>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-gray-100 shadow-sm flex items-center gap-4">
                        <div
                            class="w-12 h-12 rounded-lg bg-gold-50 text-gold-600 flex items-center justify-center text-xl">
                            <i class="fa-solid fa-bolt"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-navy-900">45ms</div>
                            <div class="text-xs text-gray-500 font-bold uppercase">Avg Latency</div>
                        </div>
                    </div>
                </div>

                <!-- Main Chart -->
                <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
                    <h3 class="font-bold text-navy-900 mb-6 flex items-center gap-2"><i
                            class="fa-solid fa-chart-area text-gold-500"></i> Global Traffic Volume</h3>
                    <div class="h-64"><canvas id="attackChart"></canvas></div>
                </div>
            </section>

            <!-- TAB: INFRASTRUCTURE (New) -->
            <section id="tab-infra" class="hidden space-y-6 tab-view animate-fade-in">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Site 1 -->
                    <div
                        class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden group hover:border-gold-400 transition-all">
                        <div class="h-32 bg-gray-100 relative items-center justify-center flex">
                            <i class="fa-brands fa-shopify text-4xl text-gray-300"></i>
                            <div
                                class="absolute top-2 right-2 px-2 py-1 bg-green-100 text-green-700 text-[10px] font-bold rounded">
                                LIVE</div>
                        </div>
                        <div class="p-5">
                            <h3 class="font-bold text-navy-900">mystore-global.com</h3>
                            <div class="text-xs text-gray-500 mt-1 flex items-center gap-2"><i
                                    class="fa-solid fa-code-branch"></i> main • <i class="fa-regular fa-clock"></i> 2h
                                ago</div>
                            <div class="mt-4 pt-4 border-t border-gray-100 flex justify-between items-center">
                                <span class="text-xs font-mono text-gray-400">us-east-1</span>
                                <button class="text-gold-600 hover:text-navy-900 text-sm font-bold">Manage <i
                                        class="fa-solid fa-arrow-right"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Site 2 -->
                    <div
                        class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden group hover:border-gold-400 transition-all">
                        <div class="h-32 bg-gray-100 relative items-center justify-center flex">
                            <i class="fa-brands fa-wordpress text-4xl text-gray-300"></i>
                            <div
                                class="absolute top-2 right-2 px-2 py-1 bg-green-100 text-green-700 text-[10px] font-bold rounded">
                                LIVE</div>
                        </div>
                        <div class="p-5">
                            <h3 class="font-bold text-navy-900">corporate-blog.io</h3>
                            <div class="text-xs text-gray-500 mt-1 flex items-center gap-2"><i
                                    class="fa-solid fa-code-branch"></i> v2.1-fix • <i class="fa-regular fa-clock"></i>
                                5d ago</div>
                            <div class="mt-4 pt-4 border-t border-gray-100 flex justify-between items-center">
                                <span class="text-xs font-mono text-gray-400">eu-west-2</span>
                                <button class="text-gold-600 hover:text-navy-900 text-sm font-bold">Manage <i
                                        class="fa-solid fa-arrow-right"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Add New -->
                    <button onclick="app.switchTab('deploy')"
                        class="bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center gap-3 text-gray-400 hover:border-gold-500 hover:text-gold-600 hover:bg-white transition-all min-h-[220px]">
                        <div class="w-12 h-12 rounded-full bg-white shadow-sm flex items-center justify-center text-xl">
                            <i class="fa-solid fa-plus"></i>
                        </div>
                        <span class="font-bold text-sm">Deploy New Project</span>
                    </button>
                </div>
            </section>

            <!-- TAB: DEPLOYMENT (New) -->
            <section id="tab-deploy" class="hidden space-y-6 tab-view animate-fade-in max-w-4xl mx-auto">
                <div class="bg-white p-8 rounded-xl border border-gray-200 shadow-lg">
                    <h2 class="text-xl font-bold text-navy-900 mb-6">Deploy New Application</h2>

                    <div class="space-y-6" id="deploy-wizard">
                        <!-- Step 1: Connect -->
                        <div>
                            <label class="block text-sm font-bold text-navy-800 mb-2">1. Connect Registry</label>
                            <div class="grid grid-cols-2 gap-4">
                                <button
                                    class="p-4 border border-gray-200 rounded-xl flex items-center gap-3 hover:border-black hover:bg-gray-50 transition-all">
                                    <i class="fa-brands fa-github text-xl"></i>
                                    <div class="text-left">
                                        <div class="text-sm font-bold text-navy-900">GitHub</div>
                                        <div class="text-[10px] text-gray-500">Import Repository</div>
                                    </div>
                                </button>
                                <button
                                    class="p-4 border border-gray-200 rounded-xl flex items-center gap-3 hover:border-blue-500 hover:bg-blue-50 transition-all">
                                    <i class="fa-brands fa-docker text-xl text-blue-500"></i>
                                    <div class="text-left">
                                        <div class="text-sm font-bold text-navy-900">Docker Hub</div>
                                        <div class="text-[10px] text-gray-500">Pull Image</div>
                                    </div>
                                </button>
                            </div>
                        </div>

                        <!-- Step 2: Config -->
                        <div>
                            <label class="block text-sm font-bold text-navy-800 mb-2">2. Configuration</label>
                            <div class="grid grid-cols-2 gap-4">
                                <input type="text" placeholder="Project Name (e.g. my-app)"
                                    class="w-full px-4 py-2 border border-gray-200 rounded-lg text-sm focus:border-gold-500 outline-none">
                                <select class="w-full px-4 py-2 border border-gray-200 rounded-lg text-sm bg-white">
                                    <option>Node.js 18</option>
                                    <option>Python 3.11</option>
                                    <option>Go 1.20</option>
                                </select>
                            </div>
                        </div>

                        <button onclick="app.startDeploySim()"
                            class="w-full py-4 bg-navy-900 text-white rounded-xl font-bold shadow-lg hover:bg-navy-800 transition-all">
                            Initialize Deployment <i class="fa-solid fa-rocket ml-2"></i>
                        </button>
                    </div>

                    <!-- Terminal Simulation -->
                    <div id="deploy-terminal"
                        class="hidden mt-6 bg-black rounded-xl p-4 font-mono text-xs text-green-400 h-64 overflow-y-auto border border-gray-800 shadow-inner">
                        <div class="animate-pulse">Waiting for commands...</div>
                    </div>
                </div>
            </section>

            <!-- TAB: BILLING (New) -->
            <section id="tab-billing" class="hidden space-y-8 tab-view animate-fade-in max-w-5xl mx-auto">
                <!-- Usage Meter -->
                <div class="bg-navy-900 text-white p-8 rounded-2xl relative overflow-hidden shadow-2xl">
                    <div
                        class="absolute top-0 right-0 w-64 h-64 bg-gold-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2">
                    </div>

                    <div class="relative z-10 flex justify-between items-start mb-8">
                        <div>
                            <div class="text-gold-500 font-bold text-sm tracking-wider uppercase mb-1">Professional Plan
                            </div>
                            <h2 class="text-3xl font-bold">Usage Metrics</h2>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold">$29.00</div>
                            <div class="text-xs text-gray-400">Renews on Feb 01, 2026</div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-12 relative z-10">
                        <div>
                            <div class="flex justify-between text-sm mb-2"><span class="font-bold">Bandwidth</span>
                                <span>450GB / 1TB</span>
                            </div>
                            <div class="w-full h-2 bg-white/10 rounded-full overflow-hidden">
                                <div class="w-[45%] h-full bg-gold-500 shadow-[0_0_10px_#D4AF37]"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-2"><span class="font-bold">Requests</span>
                                <span>8.2M / 10M</span>
                            </div>
                            <div class="w-full h-2 bg-white/10 rounded-full overflow-hidden">
                                <div class="w-[82%] h-full bg-red-500 shadow-[0_0_10px_#ef4444]"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Plans -->
                <div class="grid md:grid-cols-3 gap-6">
                    <div
                        class="p-6 rounded-xl border border-gray-200 bg-white opacity-50 hover:opacity-100 transition-all cursor-not-allowed">
                        <h3 class="font-bold text-gray-500">Free Tier</h3>
                        <div class="text-2xl font-bold text-gray-400 mt-2">$0</div>
                        <button
                            class="mt-4 w-full py-2 border border-gray-200 rounded text-gray-400 text-sm">Downgrade</button>
                    </div>
                    <div class="p-6 rounded-xl border-2 border-gold-500 bg-white shadow-lg relative">
                        <div
                            class="absolute -top-3 left-1/2 -translate-x-1/2 bg-gold-500 text-navy-900 text-[10px] font-bold px-3 py-1 rounded-full">
                            CURRENT PLAN</div>
                        <h3 class="font-bold text-navy-900">Pro Plan</h3>
                        <div class="text-2xl font-bold text-navy-900 mt-2">$29</div>
                        <button
                            class="mt-4 w-full py-2 bg-navy-900 text-white rounded text-sm font-bold">Manage</button>
                    </div>
                    <div class="p-6 rounded-xl border border-gray-200 bg-white hover:border-navy-900 transition-all">
                        <h3 class="font-bold text-navy-900">Enterprise</h3>
                        <div class="text-2xl font-bold text-navy-900 mt-2">$99</div>
                        <button
                            class="mt-4 w-full py-2 border border-navy-900 text-navy-900 rounded text-sm font-bold hover:bg-navy-900 hover:text-white transition-all">Upgrade</button>
                    </div>
                </div>

                <!-- Invoices -->
                <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                    <div class="p-4 border-b border-gray-100 font-bold text-navy-900 bg-gray-50 text-sm">Invoice History
                    </div>
                    <table class="w-full text-sm">
                        <thead class="text-gray-400 text-xs uppercase text-left">
                            <tr>
                                <th class="p-4 font-normal">Date</th>
                                <th class="p-4 font-normal">Amount</th>
                                <th class="p-4 font-normal">Status</th>
                                <th class="p-4 font-normal text-right">Invoice</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100">
                            <tr>
                                <td class="p-4">Jan 01, 2026</td>
                                <td class="p-4 font-bold text-navy-900">$29.00</td>
                                <td class="p-4"><span
                                        class="px-2 py-1 bg-green-100 text-green-700 rounded text-[10px] font-bold">PAID</span>
                                </td>
                                <td class="p-4 text-right"><button class="text-gray-400 hover:text-navy-900"><i
                                            class="fa-solid fa-download"></i></button></td>
                            </tr>
                            <tr>
                                <td class="p-4">Dec 01, 2025</td>
                                <td class="p-4 font-bold text-navy-900">$29.00</td>
                                <td class="p-4"><span
                                        class="px-2 py-1 bg-green-100 text-green-700 rounded text-[10px] font-bold">PAID</span>
                                </td>
                                <td class="p-4 text-right"><button class="text-gray-400 hover:text-navy-900"><i
                                            class="fa-solid fa-download"></i></button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- TAB: SHIELDS (New) -->
            <section id="tab-shields" class="hidden space-y-6 tab-view animate-fade-in max-w-4xl mx-auto">
                <div
                    class="bg-navy-900 text-white rounded-2xl p-8 flex justify-between items-center bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]">
                    <div>
                        <h2 class="text-2xl font-bold text-gold-500 mb-2">Active Defense Matrix</h2>
                        <p class="text-gray-400 text-sm">Configure automated threat mitigation modules.</p>
                    </div>
                    <div class="text-right">
                        <div class="text-4xl font-bold text-white">94<span class="text-lg text-gray-500">%</span></div>
                        <div class="text-[10px] uppercase tracking-widest text-gold-500">Shield Integrity</div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Shield Item -->
                    <div
                        class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm flex items-start justify-between">
                        <div class="flex gap-4">
                            <div
                                class="w-10 h-10 rounded bg-blue-50 text-blue-600 flex items-center justify-center text-xl">
                                <i class="fa-solid fa-database"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-navy-900">SQL Injection Filter</h3>
                                <p class="text-[10px] text-gray-500 mt-1 max-w-[200px]">Analyzes usage of special
                                    characters in query params.</p>
                            </div>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" checked class="sr-only peer">
                            <div
                                class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600">
                            </div>
                        </label>
                    </div>

                    <!-- Shield Item -->
                    <div
                        class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm flex items-start justify-between">
                        <div class="flex gap-4">
                            <div
                                class="w-10 h-10 rounded bg-purple-50 text-purple-600 flex items-center justify-center text-xl">
                                <i class="fa-solid fa-code"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-navy-900">XSS Sanitizer</h3>
                                <p class="text-[10px] text-gray-500 mt-1 max-w-[200px]">Strips script tags from incoming
                                    POST bodies.</p>
                            </div>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" checked class="sr-only peer">
                            <div
                                class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600">
                            </div>
                        </label>
                    </div>

                    <!-- Shield Item -->
                    <div
                        class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm flex items-start justify-between">
                        <div class="flex gap-4">
                            <div
                                class="w-10 h-10 rounded bg-red-50 text-red-600 flex items-center justify-center text-xl">
                                <i class="fa-solid fa-robot"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-navy-900">Bot Challenge (Captcha)</h3>
                                <p class="text-[10px] text-gray-500 mt-1 max-w-[200px]">Forces JS challenge on
                                    suspicious UAs.</p>
                            </div>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" class="sr-only peer">
                            <div
                                class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600">
                            </div>
                        </label>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- IRON GUIDE STYLES -->
    <style>
        .hologram-container {
            perspective: 1000px;
            width: 120px;
            height: 120px;
            margin: 0 auto;
            position: relative;
        }

        .holo-head {
            width: 60px;
            height: 80px;
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.4);
            border-radius: 40% 40% 50% 50%;
            position: absolute;
            left: 30px;
            top: 20px;
            animation: floatHead 3s ease-in-out infinite;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.2);
        }

        .holo-eye {
            width: 14px;
            height: 4px;
            background: #D4AF37;
            position: absolute;
            top: 35px;
            box-shadow: 0 0 5px #D4AF37;
        }

        .eye-left {
            left: 12px;
        }

        .eye-right {
            right: 12px;
        }

        .holo-scan-line {
            width: 100%;
            height: 2px;
            background: rgba(212, 175, 55, 0.8);
            position: absolute;
            top: 0;
            animation: scanDown 2s linear infinite;
            box-shadow: 0 0 10px #D4AF37;
            opacity: 0.5;
        }

        .holo-ring {
            position: absolute;
            bottom: -10px;
            left: 10px;
            width: 100px;
            height: 30px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 50%;
            transform: rotateX(70deg);
            animation: spinRing 4s linear infinite;
        }

        @keyframes scanDown {
            0% {
                top: 0;
                opacity: 0;
            }

            50% {
                opacity: 1;
            }

            100% {
                top: 100%;
                opacity: 0;
            }
        }

        @keyframes floatHead {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        @keyframes spinRing {
            0% {
                transform: rotateX(70deg) rotateZ(0deg);
            }

            100% {
                transform: rotateX(70deg) rotateZ(360deg);
            }
        }

        .guide-bubble {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid #D4AF37;
            padding: 12px;
            border-radius: 12px;
            position: relative;
            margin-top: 10px;
            color: #D4AF37;
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            text-align: center;
        }

        .guide-bubble::after {
            content: '';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 0 6px 6px;
            border-style: solid;
            border-color: transparent transparent #D4AF37;
            display: block;
            width: 0;
        }

        /* KYC Overlay */
        .kyc-overlay {
            position: absolute;
            inset: 0;
            z-index: 20;
            pointer-events: none;
            border: 2px solid rgba(212, 175, 55, 0.1);
            border-radius: 12px;
        }

        .face-frame {
            width: 180px;
            height: 240px;
            border: 2px dashed rgba(212, 175, 55, 0.5);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.3s;
        }

        .face-frame.valid {
            border-color: #22c55e;
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
            border-style: solid;
        }
    </style>

    <!-- Login Modal -->
    <dialog id="login-modal"
        class="bg-transparent backdrop:backdrop-blur-sm p-0 m-auto transition-all duration-300 scale-90 opacity-0 open:scale-100 open:opacity-100">
        <div
            class="bg-white/95 backdrop-blur w-[420px] rounded-2xl shadow-2xl relative overflow-hidden flex flex-col border border-white/20 min-h-[500px]">

            <!-- Close Button -->
            <button onclick="document.getElementById('login-modal').close()"
                class="absolute top-4 right-4 text-gray-400 hover:text-navy-900 transition-colors z-50"><i
                    class="fa-solid fa-xmark"></i></button>

            <!-- PHASE 1: EMAIL ENTRY -->
            <div id="phase-1" class="phase-view p-8 flex flex-col justify-center h-full pt-12">
                <div class="text-center mb-8">
                    <div
                        class="w-16 h-16 bg-navy-900 rounded-2xl mx-auto mb-4 flex items-center justify-center shadow-gold">
                        <img src="/static/logo.png" class="h-10 w-10" alt="IW" onerror="this.style.display='none'">
                    </div>
                    <h2 class="font-cinzel text-xl font-bold text-navy-900">Secure Console</h2>
                    <p class="text-xs text-gray-500 mt-1">Identify yourself, Commander.</p>
                </div>
                <form onsubmit="app.startGuideFlow(event)" class="space-y-4">
                    <div class="relative group">
                        <i
                            class="fa-solid fa-user-astronaut absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm group-focus-within:text-gold-500 transition-colors"></i>
                        <input type="email" id="email-input" required placeholder="Commander Email"
                            class="w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 text-sm focus:border-gold-500 focus:ring-1 focus:ring-gold-500 outline-none transition-all font-medium bg-gray-50 focus:bg-white text-navy-900">
                    </div>
                    <button type="submit"
                        class="btn-press w-full py-4 bg-navy-900 text-white rounded-xl font-bold text-sm transition-all hover:bg-navy-800 shadow-lg">
                        Proceed to Verification <i class="fa-solid fa-arrow-right ml-2"></i>
                    </button>
                    <div class="text-center mt-4">
                        <span class="text-[10px] text-gray-400">IronWall v2.0 // Secured by Neural Shield™</span>
                    </div>
                </form>
            </div>

            <!-- PHASE 2: IRON GUIDE & KYC -->
            <div id="phase-2" class="phase-view hidden h-full flex flex-col relative bg-navy-950 min-h-[500px]">
                <!-- Camera Feed Layer -->
                <div class="absolute inset-0 z-0">
                    <video id="ironEyeFeed" autoplay muted playsinline
                        class="w-full h-full object-cover opacity-40"></video>
                    <div class="kyc-overlay">
                        <div id="face-frame" class="face-frame hidden">
                            <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-6 text-[10px] text-gold-500 font-mono tracking-widest hidden"
                                id="scan-text">SCANNING...</div>
                        </div>
                    </div>
                </div>

                <!-- Iron Guide Layer -->
                <div class="relative z-10 flex flex-col items-center mt-12">
                    <div class="hologram-container">
                        <div class="holo-head">
                            <div class="holo-eye eye-left"></div>
                            <div class="holo-eye eye-right"></div>
                            <div class="holo-scan-line"></div>
                        </div>
                        <div class="holo-ring"></div>
                    </div>
                    <div class="guide-bubble max-w-[80%]" id="guide-text">
                        Initializing IronGuide...
                    </div>
                </div>

                <!-- Footer Controls -->
                <div class="mt-auto p-6 z-10 w-full relative">
                    <div id="liveness-challenges" class="hidden text-center mb-4">
                        <div class="text-white font-bold text-xl mb-2 animate-pulse" id="challenge-text">LOOK LEFT</div>
                        <div class="h-1 w-full bg-gray-700 rounded-full overflow-hidden">
                            <div class="h-full bg-gold-500 animate-[width_3s_linear] w-full"></div>
                        </div>
                    </div>

                    <button id="kyc-next-btn"
                        class="hidden w-full py-4 bg-gold-500 text-navy-900 rounded-xl font-bold text-sm shadow-lg hover:bg-gold-400 transition-all border border-gold-400"
                        onclick="app.startDualLock()">
                        Identity Confirmed. Continue <i class="fa-solid fa-chevron-right ml-1"></i>
                    </button>
                </div>
            </div>

            <!-- PHASE 3: DUAL LOCK AUTH -->
            <div id="phase-3"
                class="phase-view hidden p-8 h-full flex flex-col justify-center bg-white relative min-h-[500px]">
                <button type="button" onclick="app.resetAuth()"
                    class="absolute top-4 left-4 text-gray-400 hover:text-navy-900 text-xs"><i
                        class="fa-solid fa-arrow-left"></i> Back</button>

                <div class="text-center mb-6 mt-4">
                    <div
                        class="w-16 h-16 bg-navy-900 rounded-2xl mx-auto mb-4 flex items-center justify-center text-white text-2xl shadow-xl">
                        <i class="fa-solid fa-shield-halved"></i>
                    </div>
                    <h2 class="font-cinzel text-lg font-bold text-navy-900">Dual-Lock Protocol</h2>
                    <p class="text-[10px] text-gray-500 mt-1 max-w-[200px] mx-auto">Lock 1: Knowledge. Lock 2:
                        Possession.</p>
                </div>

                <form onsubmit="app.handleFinalAuth(event)" class="space-y-5">
                    <!-- Lock 1 -->
                    <div>
                        <label class="text-[10px] font-bold text-navy-900 uppercase tracking-wider mb-1 block">Lock 1:
                            Master Password</label>
                        <input type="password" required value="demo123"
                            class="w-full px-4 py-3 rounded-xl border border-gray-200 text-sm focus:border-gold-500 outline-none bg-gray-50 text-center font-bold tracking-widest text-navy-900">
                    </div>

                    <!-- Lock 2 -->
                    <div class="relative">
                        <label
                            class="text-[10px] font-bold text-navy-900 uppercase tracking-wider mb-1 block flex justify-between">
                            <span>Lock 2: Session Key</span>
                            <span class="text-green-600 bg-green-50 px-2 rounded">DEMO: 888888</span>
                        </label>
                        <input type="text" id="otp-input-final" required value="888888" maxlength="6"
                            class="w-full px-4 py-3 rounded-xl border border-gray-200 text-sm focus:border-gold-500 outline-none bg-gray-50 text-center font-mono tracking-[0.5em] text-navy-900 font-bold border-green-200">
                        <div class="absolute right-3 bottom-3 text-green-500"><i class="fa-solid fa-circle-check"></i>
                        </div>
                    </div>

                    <button type="submit"
                        class="btn-press w-full py-4 bg-navy-900 text-white rounded-xl font-bold text-sm transition-all hover:bg-navy-800 shadow-lg mt-4 flex items-center justify-center gap-2">
                        <i class="fa-solid fa-lock-open"></i> Disengage Locks & Enter
                    </button>
                </form>
            </div>

            <!-- Loader Overlay -->
            <div id="login-loader"
                class="absolute inset-0 bg-navy-900/95 flex flex-col items-center justify-center hidden z-50">
                <div class="relative">
                    <div class="w-16 h-16 border-4 border-white/10 border-t-gold-500 rounded-full animate-spin"></div>
                    <div class="absolute inset-0 flex items-center justify-center font-bold text-white text-xs">IW</div>
                </div>
                <div class="text-gold-500 font-bold tracking-[0.2em] text-xs mt-6 animate-pulse">AUTHENTICATING...</div>
            </div>

        </div>
    </dialog>

    <!-- LOGIC -->
    <script type="module">
        import { IronEye } from './static/ironEye.js';

        window.app = {
            ironEye: null,
            email: null,

            // --- UI UTILS ---
            showToast: function (message, type = 'info') {
                const container = document.getElementById('toast-container');
                const toast = document.createElement('div');
                toast.className = 'toast';

                let icon = 'fa-circle-info';
                let color = '#D4AF37';
                if (type === 'success') { icon = 'fa-circle-check'; color = '#22c55e'; }
                if (type === 'warning') { icon = 'fa-triangle-exclamation'; color = '#eab308'; }
                if (type === 'error') { icon = 'fa-circle-xmark'; color = '#ef4444'; }

                toast.style.borderLeftColor = color;
                toast.innerHTML = `<i class="fa-solid ${icon}" style="color: ${color}; font-size: 18px;"></i> <span>${message}</span>`;
                container.appendChild(toast);
                setTimeout(() => { toast.remove(); }, 3000);
            },

            // --- TAB SWITCHING (SAAS LOGIC) ---
            switchTab: function (tabId) {
                // Update Nav Active State
                document.querySelectorAll('aside nav button').forEach(btn => {
                    btn.classList.remove('bg-gold-500', 'text-navy-900', 'shadow-lg');
                    btn.classList.add('text-gray-400');
                    if (btn.id === 'nav-' + tabId) {
                        btn.classList.add('bg-gold-500', 'text-navy-900', 'shadow-lg');
                        btn.classList.remove('text-gray-400');
                    }
                });

                // Hide all views
                document.querySelectorAll('.tab-view').forEach(el => el.classList.add('hidden'));
                const target = document.getElementById('tab-' + tabId);
                target.classList.remove('hidden');

                // Header update
                const headers = {
                    'overview': ['Mission Control', 'Real-time telemetry and command authority.'],
                    'infra': ['Global Infrastructure', 'Status of deployed edge nodes and origin servers.'],
                    'deploy': ['Deployment Center', 'Launch new applications to the edge network.'],
                    'billing': ['Financial Overview', 'Manage subscriptions and view usage metrics.'],
                    'shields': ['Defense Matrix', 'Configure WAF rules and active threat mitigation.']
                };
                document.getElementById('page-title').innerText = headers[tabId][0];
                document.getElementById('page-subtitle').innerText = headers[tabId][1];

                if (tabId === 'overview' && !window.myChart) this.initCharts();
            },

            // --- DEPLOY SIMULATION ---
            startDeploySim: async function () {
                const term = document.getElementById('deploy-terminal');
                term.classList.remove('hidden');
                term.innerHTML = '';

                const log = (msg, color = 'text-green-400') => {
                    const line = document.createElement('div');
                    line.className = `font-mono ${color} mb-1`;
                    // timestamp
                    const time = new Date().toISOString().split('T')[1].split('.')[0];
                    line.innerText = `[${time}] ${msg}`;
                    term.appendChild(line);
                    term.scrollTop = term.scrollHeight;
                };

                const wait = ms => new Promise(r => setTimeout(r, ms));

                log("Initializing Build Container...", "text-blue-400");
                await wait(800);
                log("Cloning repository: my-app/main...");
                await wait(1200);
                log("Installing dependencies (npm ci)...");
                await wait(2000);
                log("Build started...", "text-yellow-400");
                await wait(1500);
                log("Optimizing static assets...");
                await wait(1000);
                log("Containerizing application...", "text-blue-400");
                await wait(1500);
                log("Pushing to IronWall Edge Network...");
                await wait(1000);
                log("Verifying health checks...", "text-yellow-400");
                await wait(1000);
                log("DEPLOYMENT COMPLETE.", "text-green-400 font-bold");

                this.showToast('Deployment Successful.', 'success');
                setTimeout(() => this.switchTab('infra'), 1000);
            },

            resetAuth: function () {
                document.getElementById('phase-1').classList.remove('hidden');
                document.getElementById('phase-2').classList.add('hidden');
                document.getElementById('phase-3').classList.add('hidden');
                document.getElementById('kyc-next-btn').classList.add('hidden');
            },

            openLogin: function () {
                const modal = document.getElementById('login-modal');
                modal.showModal();
                this.resetAuth();
            },

            // --- PHASE 1 -> 2 ---
            startGuideFlow: async function (e) {
                e.preventDefault();
                this.email = document.getElementById('email-input').value;
                if (!this.email.includes('@')) return this.showToast('Invalid Email', 'warning');

                // Switch Views
                document.getElementById('phase-1').classList.add('hidden');
                document.getElementById('phase-2').classList.remove('hidden');

                // Init Camera
                if (!this.ironEye) this.ironEye = new IronEye('ironEyeFeed', 'challengeOverlay');
                try { await this.ironEye.init(); } catch (e) { console.warn("Cam fail", e); } // proceeding anyway for demo

                this.runGuideScript();
            },

            // --- IRON GUIDE SCRIPT ---
            runGuideScript: async function () {
                const bubble = document.getElementById('guide-text');
                const updateSay = (text) => {
                    bubble.style.opacity = '0';
                    setTimeout(() => { bubble.innerText = text; bubble.style.opacity = '1'; }, 200);
                };

                const wait = (ms) => new Promise(r => setTimeout(r, ms));

                // Script (Optimized Duration)
                updateSay(`Welcome, Commander ${this.email.split('@')[0]}. Initiating biometrics.`);
                await wait(2000);

                updateSay("Please position your face within the frame.");
                document.getElementById('face-frame').classList.remove('hidden');
                await wait(1500);

                // LIVENESS TEST
                updateSay("Liveness Check Required.");
                await wait(1000);

                const challenge = document.getElementById('liveness-challenges');
                const cText = document.getElementById('challenge-text');
                challenge.classList.remove('hidden');

                // Challenge 1
                cText.innerText = "LOOK LEFT";
                updateSay("Look to your LEFT.");
                await wait(1500);

                // Challenge 2
                cText.innerText = "BLINK TWICE";
                updateSay("Blink twice rapidly.");
                await wait(1500);

                challenge.classList.add('hidden');
                document.getElementById('face-frame').classList.add('valid'); // Green ring
                document.getElementById('scan-text').innerText = "MATCH CONFIRMED";
                document.getElementById('scan-text').classList.remove('hidden');

                updateSay("Identity Verified. Biometric pattern unlocked.");
                await wait(1000);

                document.getElementById('kyc-next-btn').classList.remove('hidden');
            },

            startDualLock: function () {
                document.getElementById('phase-2').classList.add('hidden');
                document.getElementById('phase-3').classList.remove('hidden');
            },

            handleFinalAuth: async function (e) {
                e.preventDefault();
                const loader = document.getElementById('login-loader');
                loader.classList.remove('hidden');

                const otp = document.getElementById('otp-input-final').value;

                // --- FAILSAFE LOGIC ---
                // We use a timeout to guarantee entry even if backend hangs
                const minWait = new Promise(r => setTimeout(r, 1500)); // Min show time for effect

                try {
                    // Try real backend
                    // Note: In demo, we might just trust the '888888' check here to be 100% sure
                    if (otp === '888888') {
                        await minWait;
                        throw new Error("Demo Bypass"); // Handled below
                    }

                    await fetch(`${CONFIG.apiBase}/verify-otp`, { method: 'POST', body: JSON.stringify({ email: this.email, otp: otp }) });
                } catch (e) {
                    console.log("Auth proceed (Demo/Network):", e);
                }

                // ALWAYS SUCCEED after timeout
                loader.classList.add('hidden');
                document.getElementById('login-modal').close();

                const landing = document.getElementById('view-landing');
                const dashboard = document.getElementById('view-dashboard');
                landing.style.opacity = '0';
                setTimeout(() => {
                    landing.classList.add('hidden');
                    dashboard.classList.remove('hidden');
                    dashboard.offsetHeight;
                    dashboard.style.opacity = '1';
                    document.getElementById('user-welcome').innerText = (this.email ? this.email.split('@')[0] : 'Admin');
                    document.getElementById('user-welcome-sidebar').innerText = (this.email ? this.email.split('@')[0] : 'Admin');
                    this.initCharts();
                    this.showToast(`Welcome Home.`, 'success');
                }, 500);
            },

            logout: function () { window.location.reload(); },
            toggleServiceMenu: function () { this.showToast('Systems Nominal', 'info'); },
            refreshData: function () {
                const btn = event.currentTarget.querySelector('i');
                if (btn) btn.classList.add('animate-spin');
                setTimeout(() => { if (btn) btn.classList.remove('animate-spin'); this.showToast('Telemetry Updated.', 'success'); this.initCharts(); }, 800);
            },

            initCharts: function () {
                const ctx = document.getElementById('attackChart').getContext('2d');
                if (window.myChart) window.myChart.destroy();
                const gradient = ctx.createLinearGradient(0, 0, 0, 300);
                gradient.addColorStop(0, 'rgba(212, 175, 55, 0.4)');
                gradient.addColorStop(1, 'rgba(212, 175, 55, 0)');
                window.myChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', 'Now'],
                        datasets: [{ label: 'Requests/sec', data: Array.from({ length: 7 }, () => Math.floor(Math.random() * 400) + 100), borderColor: '#D4AF37', borderWidth: 2, backgroundColor: gradient, fill: true, tension: 0.4, pointRadius: 4, pointBackgroundColor: '#0F172A', pointBorderColor: '#D4AF37', pointBorderWidth: 2 }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, interaction: { mode: 'index', intersect: false }, plugins: { legend: { display: false } }, scales: { y: { grid: { color: 'rgba(0,0,0,0.05)' }, beginAtZero: true }, x: { grid: { display: false } } } }
                });
            }
        };

        // Clock Ticker
        setInterval(() => {
            const el = document.getElementById('clock-ticker');
            if (el) el.innerText = new Date().toISOString().split('T')[1].split('.')[0] + ' UTC';
            const el2 = document.getElementById('clock-dashboard');
            if (el2) el2.innerText = new Date().toISOString().split('T')[1].split('.')[0] + ' UTC';
        }, 1000);
    </script>
</body>

</html>