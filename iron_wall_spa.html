<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IronWall | The Quantum Fortress</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=Inter:wght@300;400;500;600;700&family=Share+Tech+Mono&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- External Libs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        royal: {
                            50: '#F8FAFC',
                            100: '#F1F5F9',
                            800: '#1E293B',
                            900: '#0F172A',
                        },
                        gold: {
                            400: '#D4AF37',
                            500: '#C5A059',
                            600: '#B08D46',
                            glow: 'rgba(197, 160, 89, 0.5)'
                        },
                        neon: {
                            blue: '#00f3ff',
                            red: '#ff003c'
                        }
                    },
                    fontFamily: {
                        cinzel: ['Cinzel', 'serif'],
                        inter: ['Inter', 'sans-serif'],
                        mono: ['Share Tech Mono', 'monospace'],
                    },
                    boxShadow: {
                        'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.15)',
                        'gold-glow': '0 0 20px rgba(197, 160, 89, 0.3)',
                        'neon-glow': '0 0 10px #00f3ff, 0 0 20px #00f3ff',
                        'panic-glow': '0 0 20px #ff003c, inset 0 0 20px #ff003c',
                    },
                    cursor: {
                        'crosshair': 'crosshair',
                    }
                }
            }
        }
    </script>

    <style>
        :root {
            --bg-primary: #F8FAFC;
            --text-primary: #0F172A;
            --accent-gold: #C5A059;
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.4);
        }

        body.panic-mode {
            --bg-primary: #050000;
            --text-primary: #ff003c;
            --accent-gold: #ff003c;
            --glass-bg: rgba(20, 0, 0, 0.9);
            --glass-border: rgba(255, 0, 60, 0.4);
            background: #000 !important;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            transition: background 0.5s ease;
        }

        /* Custom Cursor */
        #cursor-follower {
            position: fixed;
            width: 30px;
            height: 30px;
            border: 1px solid var(--accent-gold);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: width 0.2s, height 0.2s, border-color 0.5s;
        }

        #cursor-dot {
            position: fixed;
            width: 6px;
            height: 6px;
            background: var(--accent-gold);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
        }

        /* Glassmorphism */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .panic-mode .glass-panel {
            box-shadow: 0 0 15px rgba(255, 0, 60, 0.2);
        }

        /* Terminal Overlay */
        #ghost-terminal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 0;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(5px);
            z-index: 100;
            overflow: hidden;
            transition: height 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            font-family: 'Share Tech Mono', monospace;
            color: #00f3ff;
            box-shadow: 0 0 50px rgba(0, 243, 255, 0.1);
        }

        #ghost-terminal.open {
            height: 40vh;
            border-bottom: 1px solid #00f3ff;
        }

        /* Matrix Rain Canvas */
        #matrix-rain {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.1;
            pointer-events: none;
            z-index: 0;
        }

        .panic-mode #matrix-rain {
            opacity: 0.2;
            filter: hue-rotate(280deg) brightness(1.5);
        }

        /* Panic Switch */
        .switch-container {
            display: inline-block;
            vertical-align: middle;
        }

        .panic-switch {
            appearance: none;
            width: 60px;
            height: 30px;
            background: #1e293b;
            border-radius: 30px;
            position: relative;
            cursor: pointer;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .panic-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 26px;
            height: 26px;
            background: #475569;
            border-radius: 50%;
            transition: 0.3s;
        }

        .panic-switch:checked {
            background: #3f000e;
            box-shadow: inset 0 0 10px #ff003c;
        }

        .panic-switch:checked::after {
            left: 32px;
            background: #ff003c;
            box-shadow: 0 0 10px #ff003c;
        }

        /* Splash Screen */
        #splash-screen {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 99999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #C5A059;
            font-family: 'Share Tech Mono', monospace;
        }
    </style>
</head>

<body class="text-royal-900 overflow-x-hidden selection:bg-gold-500 selection:text-white">

    <!-- AUDIO CONTEXT -->
    <!-- We initialize this on first interaction -->

    <!-- CURSOR -->
    <div id="cursor-follower"></div>
    <div id="cursor-dot"></div>

    <!-- SPLASH SCREEN -->
    <div id="splash-screen">
        <div class="mb-4">
            <i class="fa-solid fa-shield-halved text-6xl text-gold-500 animate-pulse"></i>
        </div>
        <div id="splash-text" class="text-xl tracking-widest">INITIALIZING SECURE LINK...</div>
        <div class="w-64 h-1 bg-gray-800 mt-6 rounded overflow-hidden">
            <div id="splash-bar" class="h-full bg-gold-500 w-0"></div>
        </div>
    </div>

    <!-- GHOST TERMINAL -->
    <div id="ghost-terminal" class="p-6">
        <div class="max-w-4xl mx-auto h-full flex flex-col">
            <div class="flex justify-between items-center mb-4 border-b border-cyan-500/30 pb-2">
                <span>GHOST PROTOCOL v9.0.1 [ROOT ACCESS]</span>
                <span id="terminal-clock">00:00:00</span>
            </div>
            <div id="terminal-output" class="flex-1 overflow-y-auto mb-4 text-sm space-y-1 font-mono scrollbar-hide">
                <div class="text-gray-500">Type 'help' for available commands...</div>
            </div>
            <div class="flex items-center gap-2">
                <span class="text-neon-blue">root@ironwall:~#</span>
                <input type="text" id="terminal-input"
                    class="bg-transparent border-none outline-none text-white w-full font-mono" autocomplete="off"
                    autofocus>
            </div>
        </div>
    </div>

    <!-- BIOMETRIC MODAL -->
    <dialog id="biometric-modal" class="bg-transparent p-0 backdrop:backdrop-blur-sm">
        <div
            class="glass-panel p-10 rounded-2xl flex flex-col items-center justify-center relative overflow-hidden w-96">
            <h3 class="font-cinzel text-xl font-bold mb-8 text-royal-900 dark:text-gold-500">Identity Verification</h3>

            <div class="relative w-32 h-32 mb-8 cursor-pointer group" onclick="app.processBiometric()">
                <div
                    class="absolute inset-0 border-2 border-dashed border-gray-300 rounded-full animate-[spin_10s_linear_infinite]">
                </div>
                <div
                    class="absolute inset-2 border border-gold-500 rounded-full flex items-center justify-center overflow-hidden bg-black/5">
                    <i
                        class="fa-solid fa-fingerprint text-6xl text-gray-400 group-hover:text-gold-500 transition-colors"></i>
                    <div id="scan-line" class="absolute top-0 w-full h-1 bg-gold-500 shadow-gold-glow hidden"></div>
                </div>
            </div>

            <p id="bio-status" class="font-mono text-sm text-gray-500">WAITING FOR INPUT...</p>
        </div>
    </dialog>

    <!-- CONFIG -->
    <script>
        const CONFIG = {
            paymentLinks: {
                standard: "#",
                vault: "#"
            },
            userState: {
                isLoggedIn: false,
                panicMode: false
            }
        };
    </script>

    <!-- NOTIFICATIONS -->
    <div id="notification-container" class="fixed top-24 right-5 z-50 flex flex-col gap-3 pointer-events-none"></div>

    <!-- ========================================== -->
    <!-- STATE A: LANDING (GUEST)                   -->
    <!-- ========================================== -->
    <section id="landing-view" class="w-full min-h-screen relative overflow-hidden">

        <!-- Three.js Container -->
        <div id="globe-container"
            class="absolute top-0 right-[-20%] w-[140%] h-full z-0 opacity-40 pointer-events-none"></div>

        <!-- Navbar -->
        <nav class="absolute top-0 w-full p-6 flex justify-between items-center z-20">
            <div class="flex items-center gap-3">
                <i class="fa-solid fa-shield-halved text-4xl text-gold-500"></i>
                <h1 class="font-cinzel text-2xl font-bold tracking-widest text-royal-900 panic-text">IRON<span
                        class="text-gold-500">WALL</span></h1>
            </div>
            <div>
                <button onclick="app.openLogin()"
                    class="px-6 py-2 rounded-full border border-royal-900/10 hover:border-gold-500 hover:text-gold-600 transition-all font-inter text-sm font-semibold tracking-wide bg-white/50 backdrop-blur-sm">
                    ACCESS TERMINAL
                </button>
            </div>
        </nav>

        <!-- Hero Content -->
        <div class="container mx-auto px-6 h-screen flex flex-col justify-center relative z-10">
            <div class="max-w-3xl">
                <div
                    class="inline-block px-4 py-1 mb-6 rounded-full bg-gold-500/10 border border-gold-500/20 text-gold-600 font-inter text-xs font-bold uppercase tracking-widest">
                    Quantum-Grade Cyber Defense
                </div>

                <h1 class="font-cinzel text-6xl md:text-8xl font-bold mb-6 leading-none panic-text">
                    SECURE THE <br><span
                        class="text-transparent bg-clip-text bg-gradient-to-r from-gold-600 to-gold-400">IMPOSSIBLE</span>
                </h1>

                <p class="font-inter text-royal-800/70 text-xl max-w-xl mb-10 panic-text">
                    Military-grade encryption meets AI-driven threat neutralization.
                    Currently protecting <span id="asset-counter" class="font-bold text-royal-900 font-mono">$0</span>
                    in assets.
                </p>

                <div class="flex gap-4">
                    <button onclick="app.initiatePayment('vault')"
                        class="px-8 py-4 bg-royal-900 text-white rounded-lg font-bold shadow-2xl hover:bg-royal-800 transition-all flex items-center gap-3 group">
                        ENTER THE VAULT <i
                            class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                    </button>
                    <button onclick="document.getElementById('pricing').scrollIntoView({behavior:'smooth'})"
                        class="px-8 py-4 bg-white border border-gray-200 text-royal-900 rounded-lg font-bold hover:bg-gray-50 transition-all">
                        VIEW PROTOCOLS
                    </button>
                </div>
            </div>
        </div>

        <!-- Pricing Section -->
        <div id="pricing" class="py-20 relative z-10 bg-white/50 backdrop-blur-md">
            <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                    <!-- Standard -->
                    <div class="glass-panel p-8 rounded-2xl hover:-translate-y-2 relative group">
                        <h3 class="font-cinzel text-2xl font-bold text-gray-400 mb-2">Standard</h3>
                        <div class="text-4xl font-bold font-inter mb-6 text-gray-800">$49<span
                                class="text-sm text-gray-400">/mo</span></div>
                        <ul class="space-y-3 mb-8 text-sm text-gray-600 font-inter">
                            <li class="flex items-center"><i class="fa-solid fa-check text-green-500 mr-2"></i>
                                Real-time Monitoring</li>
                            <li class="flex items-center"><i class="fa-solid fa-check text-green-500 mr-2"></i> 100k
                                Requests</li>
                        </ul>
                        <button onclick="app.initiatePayment('standard')"
                            class="w-full py-3 rounded-xl bg-gray-100 font-bold hover:bg-gray-200 transition-colors">JOIN
                            STANDARD</button>
                    </div>

                    <!-- Vault -->
                    <div
                        class="glass-panel p-8 rounded-2xl border-2 border-gold-500 hover:-translate-y-2 relative shadow-gold-glow">
                        <div
                            class="absolute -top-4 left-1/2 -translate-x-1/2 bg-gold-500 text-white px-4 py-1 rounded-full text-xs font-bold tracking-widest">
                            RECOMMENDED</div>
                        <h3 class="font-cinzel text-2xl font-bold text-gold-600 mb-2">The Vault</h3>
                        <div class="text-4xl font-bold font-inter mb-6 text-royal-900">$499<span
                                class="text-sm text-gray-400">/mo</span></div>
                        <ul class="space-y-3 mb-8 text-sm text-gray-600 font-inter">
                            <li class="flex items-center"><i class="fa-solid fa-check text-gold-500 mr-2"></i> <span
                                    class="font-bold">Ghost Protocol Access</span></li>
                            <li class="flex items-center"><i class="fa-solid fa-check text-gold-500 mr-2"></i> Zero-Day
                                AI Defense</li>
                            <li class="flex items-center"><i class="fa-solid fa-check text-gold-500 mr-2"></i> Dedicated
                                Security Node</li>
                            <li class="flex items-center"><i class="fa-solid fa-check text-gold-500 mr-2"></i> $1M
                                Insurance</li>
                        </ul>
                        <button onclick="app.initiatePayment('vault')"
                            class="w-full py-3 rounded-xl bg-gradient-to-r from-gold-600 to-gold-400 text-white font-bold hover:shadow-lg hover:shadow-gold-500/30 transition-all">SECURE
                            NOW</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========================================== -->
    <!-- STATE B: DASHBOARD (USER)                  -->
    <!-- ========================================== -->
    <div id="dashboard-view" class="hidden w-full min-h-screen bg-gray-50 flex overflow-hidden">

        <!-- Sidebar -->
        <aside class="glass-sidebar w-20 md:w-64 relative z-40 flex flex-col border-r border-gray-200">
            <div class="p-6 flex items-center gap-3 border-b border-gray-200">
                <i class="fa-solid fa-shield-halved text-2xl text-gold-500"></i>
                <span class="font-cinzel font-bold text-royal-900 tracking-widest hidden md:block panic-text">IRON<span
                        class="text-gold-500">WALL</span></span>
            </div>

            <nav class="flex-1 py-8 flex flex-col gap-2 px-3">
                <button onclick="app.switchTab('overview')"
                    class="nav-item active flex items-center gap-4 px-4 py-3 text-gold-600 bg-gold-500/10 rounded-lg transition-all group">
                    <i class="fa-solid fa-chart-line"></i>
                    <span class="hidden md:block font-inter text-sm font-semibold">Overview</span>
                </button>
                <button onclick="app.switchTab('subscription')"
                    class="nav-item flex items-center gap-4 px-4 py-3 text-gray-400 hover:text-royal-900 hover:bg-gray-100 rounded-lg transition-all group">
                    <i class="fa-solid fa-credit-card"></i>
                    <span class="hidden md:block font-inter text-sm font-semibold">Vault Subscription</span>
                </button>
                <button onclick="app.switchTab('developer')"
                    class="nav-item flex items-center gap-4 px-4 py-3 text-gray-400 hover:text-royal-900 hover:bg-gray-100 rounded-lg transition-all group">
                    <i class="fa-solid fa-code"></i>
                    <span class="hidden md:block font-inter text-sm font-semibold">Dev Nexus</span>
                </button>

                <div class="mt-auto px-4 py-4">
                    <div class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 hidden md:block">System
                        Status</div>

                    <!-- Panic Switch -->
                    <div class="flex items-center justify-between mb-4" title="Enable Lockdown Mode">
                        <span class="text-sm font-bold text-royal-900 hidden md:block panic-text">LOCKDOWN</span>
                        <input type="checkbox" class="panic-switch" onchange="app.togglePanic(this.checked)">
                    </div>

                    <!-- Matrix Log (Visual) -->
                    <div
                        class="h-32 bg-black rounded-lg relative overflow-hidden hidden md:block border border-gray-800">
                        <canvas id="matrix-mini" class="w-full h-full opacity-50"></canvas>
                        <div class="absolute bottom-2 left-2 text-[10px] text-green-500 font-mono">
                            <span class="animate-pulse">‚óè</span> LIVE TRAFFIC
                        </div>
                    </div>
                </div>
            </nav>

            <div class="p-4 border-t border-gray-200">
                <button onclick="app.logout()"
                    class="w-full py-2 flex items-center justify-center gap-2 text-red-500 hover:bg-red-50 rounded-lg transition-all text-sm font-bold">
                    <i class="fa-solid fa-power-off"></i> <span class="hidden md:inline">DISENGAGE</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-8 relative overflow-y-auto">
            <header class="flex justify-between items-end mb-10 pb-4 border-b border-gray-200">
                <div>
                    <h2 class="text-3xl font-cinzel font-bold text-royal-900 panic-text">Command Center</h2>
                    <p class="text-gray-500 font-inter text-sm mt-1 panic-text">Welcome back, Commander.</p>
                </div>
                <div class="flex items-center gap-4">
                    <div class="text-right hidden sm:block">
                        <div id="phoenix-timer" class="font-mono text-xl font-bold text-royal-900 panic-text">08:45:12
                        </div>
                        <div class="text-xs text-gold-500 font-bold tracking-widest">PHOENIX PROTOCOL</div>
                    </div>
                </div>
            </header>

            <!-- TABS -->
            <div id="tab-overview" class="content-tab animate-fade-in-up">
                <!-- KPI Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="glass-panel p-6 rounded-xl border-l-4 border-gold-500">
                        <div class="text-gray-500 text-xs font-bold uppercase mb-2">Threats Neutralized</div>
                        <div class="text-3xl font-bold text-royal-900 panic-text counter" id="threats-val">1,402</div>
                    </div>
                    <div class="glass-panel p-6 rounded-xl border-l-4 border-royal-900">
                        <div class="text-gray-500 text-xs font-bold uppercase mb-2">Bandwidth Saved</div>
                        <div class="text-3xl font-bold text-royal-900 panic-text">4.2 TB</div>
                    </div>
                    <div class="glass-panel p-6 rounded-xl border-l-4 border-green-500">
                        <div class="text-gray-500 text-xs font-bold uppercase mb-2">System Health</div>
                        <div class="text-3xl font-bold text-green-600 panic-text">99.9%</div>
                    </div>
                </div>

                <!-- 3D Mini Map Placeholder (Uses same lib as hero but different state) -->
                <div class="glass-panel p-6 rounded-xl h-96 relative overflow-hidden mb-6 flex flex-col">
                    <div class="flex justify-between items-center mb-4 z-10">
                        <h3 class="font-cinzel text-lg font-bold text-royal-900 panic-text">Global Threat Vector</h3>
                        <div class="flex gap-2">
                            <div class="px-2 py-1 bg-red-500/10 text-red-500 text-xs font-bold rounded animate-pulse">
                                LIVE ATTACK</div>
                        </div>
                    </div>
                    <!-- Reuse the globe container capability here conceptually or just a chart -->
                    <canvas id="trafficChart" width="100%" height="40"></canvas>
                </div>
            </div>

            <!-- Developer Tab -->
            <div id="tab-developer" class="content-tab hidden">
                <div class="glass-panel p-8 rounded-xl max-w-2xl">
                    <h3 class="font-cinzel text-xl font-bold text-royal-900 panic-text mb-6">Quantum Keys</h3>
                    <div class="relative mb-6">
                        <label class="text-xs font-bold text-gray-400 uppercase mb-2 block">Live Secret Key</label>
                        <div class="flex">
                            <input id="api-key" type="text" readonly value="iw_live_Tk9_QUANTUM_HASH_X99"
                                class="w-full bg-gray-100 border-none rounded-l-lg px-4 py-3 font-mono text-sm text-gray-600 outline-none">
                            <button onclick="app.copyKey()"
                                class="bg-royal-900 text-white px-6 font-bold rounded-r-lg hover:bg-gold-500 transition-colors">COPY</button>
                        </div>
                    </div>
                    <button onclick="app.regenerateKey()"
                        class="text-gold-600 font-bold hover:text-gold-500 text-sm flex items-center gap-2">
                        <i class="fa-solid fa-arrows-rotate"></i> RE-ROLL KEYS
                    </button>
                </div>
            </div>

            <!-- Subscription Tab -->
            <div id="tab-subscription" class="content-tab hidden">
                <div class="glass-panel p-8 rounded-xl border-2 border-gold-500/30 bg-gold-500/5">
                    <h2 class="text-4xl font-cinzel font-bold text-royal-900 panic-text mb-2">The Vault</h2>
                    <p class="text-gray-500 mb-6">Status: <span class="text-green-500 font-bold">ACTIVE</span></p>
                    <div class="h-px bg-gold-500/20 w-full mb-6"></div>
                    <div class="flex justify-between items-center">
                        <div>
                            <div class="text-sm text-gray-400 uppercase font-bold">Renewal</div>
                            <div class="text-lg font-bold text-royal-900 panic-text">Feb 28, 2026</div>
                        </div>
                        <button
                            class="px-6 py-2 border border-royal-900 rounded-lg hover:bg-royal-900 hover:text-white transition-all font-bold text-sm">MANAGE</button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- MATRIX RAIN GLOBAL -->
    <canvas id="matrix-rain"></canvas>

    <!-- MAIN LOGIC -->
    <script>
        // Sound Engine
        const AudioEngine = {
            ctx: null,
            init: function () {
                if (!this.ctx) this.ctx = new (window.AudioContext || window.webkitAudioContext)();
            },
            playTone: function (freq, type, duration) {
                if (!this.ctx) return;
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.type = type;
                osc.frequency.value = freq;
                osc.connect(gain);
                gain.connect(this.ctx.destination);
                osc.start();
                gain.gain.exponentialRampToValueAtTime(0.00001, this.ctx.currentTime + duration);
                osc.stop(this.ctx.currentTime + duration);
            },
            playClick: function () { this.playTone(800, 'sine', 0.1); },
            playError: function () { this.playTone(150, 'sawtooth', 0.3); },
            playSuccess: function () { this.playTone(1200, 'sine', 0.1); setTimeout(() => this.playTone(1800, 'sine', 0.2), 100); }
        };

        const app = {
            state: {
                view: 'landing',
                keySequence: [],
                terminalOpen: false
            },

            init: function () {
                // Intro Animation
                setTimeout(() => {
                    document.getElementById('splash-bar').style.transition = 'width 2s ease-in-out';
                    document.getElementById('splash-bar').style.width = '100%';
                    setTimeout(() => {
                        document.getElementById('splash-screen').style.opacity = '0';
                        document.getElementById('splash-screen').style.pointerEvents = 'none';
                        this.initThreeGlobe();
                        this.animateValue("asset-counter", 0, 500000000, 2000, true);
                    }, 2200);
                }, 500);

                // Inputs
                document.addEventListener('click', () => AudioEngine.init());
                this.setupCursor();
                this.setupTerminal();
                this.startTimer();

                // Panic Switch Listener
                document.querySelector('.panic-switch').addEventListener('change', (e) => this.togglePanic(e.target.checked));

                // Init Matrix (Global runs but invisible by opacity css until panic)
                this.initMatrix('matrix-rain', 20, 'rgba(0, 255, 60, 0.5)');
            },

            setupCursor: function () {
                const cursor = document.getElementById('cursor-follower');
                const dot = document.getElementById('cursor-dot');

                document.addEventListener('mousemove', (e) => {
                    dot.style.left = e.clientX + 'px';
                    dot.style.top = e.clientY + 'px';
                    cursor.style.left = e.clientX + 'px';
                    cursor.style.top = e.clientY + 'px';
                });

                document.addEventListener('mousedown', () => {
                    cursor.style.transform = "translate(-50%, -50%) scale(0.8)";
                    AudioEngine.playClick();
                });
                document.addEventListener('mouseup', () => cursor.style.transform = "translate(-50%, -50%) scale(1)");

                // Hover effects
                document.querySelectorAll('button, a').forEach(el => {
                    el.addEventListener('mouseenter', () => {
                        cursor.style.width = '50px';
                        cursor.style.height = '50px';
                        cursor.style.borderColor = '#C5A059';
                        cursor.style.backgroundColor = 'rgba(197, 160, 89, 0.1)';
                    });
                    el.addEventListener('mouseleave', () => {
                        cursor.style.width = '30px';
                        cursor.style.height = '30px';
                        cursor.style.backgroundColor = 'transparent';
                    });
                });
            },

            setupTerminal: function () {
                document.addEventListener('keydown', (e) => {
                    if (e.key === '`' || e.key === '~') {
                        e.preventDefault();
                        this.toggleTerminal();
                    }
                    if (this.state.terminalOpen && e.key === 'Enter') {
                        this.runCommand();
                    }
                });

                // Clock in terminal
                setInterval(() => {
                    document.getElementById('terminal-clock').innerText = new Date().toISOString().split('T')[1].split('.')[0] + " UTC";
                }, 1000);
            },

            toggleTerminal: function () {
                const term = document.getElementById('ghost-terminal');
                const input = document.getElementById('terminal-input');
                this.state.terminalOpen = !this.state.terminalOpen;

                if (this.state.terminalOpen) {
                    term.classList.add('open');
                    input.focus();
                    AudioEngine.playTone(400, 'square', 0.2);
                } else {
                    term.classList.remove('open');
                }
            },

            runCommand: function () {
                const input = document.getElementById('terminal-input');
                const output = document.getElementById('terminal-output');
                const cmd = input.value.trim().toLowerCase();

                // Echo
                const div = document.createElement('div');
                div.innerHTML = `<span class="text-neon-blue">root@ironwall:~#</span> ${input.value}`;
                output.appendChild(div);

                // Logic
                let response = "";
                if (cmd === 'help') response = "AVAILABLE COMMANDS: scan, status, clear, panic, logout";
                else if (cmd === 'clear') output.innerHTML = "";
                else if (cmd === 'status') response = "SYSTEM INTEGRITY: 100% | THREAT LEVEL: LOW";
                else if (cmd === 'scan') response = "INITIATING DEEP PACKET INSPECTION... <span class='text-green-500'>DONE</span>. 0 THREATS FOUND.";
                else if (cmd === 'panic') { this.togglePanic(true); response = "PANIC MODE ENGAGED"; }
                else if (cmd === 'logout') { this.logout(); response = "LOGGING OUT..."; }
                else response = `bash: ${cmd}: command not found`;

                if (response && cmd !== 'clear') {
                    const resDiv = document.createElement('div');
                    resDiv.className = "text-gray-300 pl-4";
                    resDiv.innerHTML = response;
                    output.appendChild(resDiv);
                }

                input.value = "";
                output.scrollTop = output.scrollHeight;
                AudioEngine.playClick();
            },

            openLogin: function () {
                document.getElementById('biometric-modal').showModal();
            },

            processBiometric: function () {
                const line = document.getElementById('scan-line');
                const status = document.getElementById('bio-status');

                line.classList.remove('hidden');
                line.classList.add('animate-[pulse_0.5s_infinite]');
                line.style.top = '0';

                status.innerText = "SCANNING BIOMETRICS...";
                status.classList.add('animate-pulse');
                AudioEngine.playTone(600, 'sawtooth', 1.0); // Scanning sound simulation requires looping, simple tone here

                anime({
                    targets: '#scan-line',
                    top: '100%',
                    direction: 'alternate',
                    loop: 4,
                    duration: 500,
                    easing: 'linear',
                    complete: () => {
                        status.innerText = "IDENTITY VERIFIED";
                        status.classList.remove('animate-pulse');
                        status.classList.add('text-green-500');
                        AudioEngine.playSuccess();
                        setTimeout(() => {
                            document.getElementById('biometric-modal').close();
                            this.login();
                        }, 1000);
                    }
                });
            },

            login: function () {
                document.getElementById('landing-view').classList.add('hidden');
                document.getElementById('dashboard-view').classList.remove('hidden');
                this.initChart();
                this.initMatrix('matrix-mini', 10, '#0f0');
            },

            logout: function () {
                document.getElementById('dashboard-view').classList.add('hidden');
                document.getElementById('landing-view').classList.remove('hidden');
                document.querySelector('.panic-switch').checked = false;
                this.togglePanic(false);
            },

            switchTab: function (tab) {
                document.querySelectorAll('.content-tab').forEach(el => el.classList.add('hidden'));
                document.getElementById('tab-' + tab).classList.remove('hidden');
                AudioEngine.playClick();
            },

            togglePanic: function (enable) {
                if (enable) {
                    document.body.classList.add('panic-mode');
                    // Play Alarm Sound (simulated)
                    AudioEngine.playTone(150, 'sawtooth', 0.5);
                    this.openLogin(); // Re-verify on Panic? Optional, but lets keeps simple
                } else {
                    document.body.classList.remove('panic-mode');
                }
            },

            animateValue: function (id, start, end, duration, currency) {
                const obj = document.getElementById(id);
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    obj.innerHTML = (currency ? "$" : "") + Math.floor(progress * (end - start) + start).toLocaleString() + (currency ? "+" : "");
                    if (progress < 1) window.requestAnimationFrame(step);
                };
                window.requestAnimationFrame(step);
            },

            startTimer: function () {
                let duration = 31512;
                setInterval(() => {
                    let h = Math.floor(duration / 3600);
                    let m = Math.floor((duration % 3600) / 60);
                    let s = duration % 60;
                    const tag = document.getElementById('phoenix-timer');
                    if (tag) tag.innerText = `${h}:${m < 10 ? '0' : ''}${m}:${s < 10 ? '0' : ''}${s}`;
                    duration--;
                }, 1000);
            },

            regenerateKey: function () {
                AudioEngine.playTone(800, 'square', 0.2);
                const input = document.getElementById('api-key');
                input.value = "GENERATING...";
                setTimeout(() => {
                    input.value = "iw_live_" + Math.random().toString(36).substr(2, 16).toUpperCase();
                    AudioEngine.playSuccess();
                }, 1000);
            },

            copyKey: function () {
                const input = document.getElementById('api-key');
                navigator.clipboard.writeText(input.value);
                AudioEngine.playSuccess();
                alert("Copied to clipboard"); // Simple feedback
            },

            initiatePayment: function () {
                window.open('https://example.com', '_blank');
            },

            // --- VISUALS ---
            initThreeGlobe: function () {
                const container = document.getElementById('globe-container');
                if (!container) return; // Safety
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });

                renderer.setSize(container.clientWidth, container.clientHeight);
                container.appendChild(renderer.domElement);

                // Sphere
                const geometry = new THREE.IcosahedronGeometry(7, 2);
                const material = new THREE.MeshBasicMaterial({ color: 0xC5A059, wireframe: true, transparent: true, opacity: 0.2 });
                const sphere = new THREE.Mesh(geometry, material);
                scene.add(sphere);

                // Particles
                const pGeo = new THREE.BufferGeometry();
                const pCount = 500;
                const pPos = new Float32Array(pCount * 3);
                for (let i = 0; i < pCount * 3; i++) {
                    pPos[i] = (Math.random() - 0.5) * 20;
                }
                pGeo.setAttribute('position', new THREE.BufferAttribute(pPos, 3));
                const pMat = new THREE.PointsMaterial({ size: 0.05, color: 0xC5A059 });
                const particles = new THREE.Points(pGeo, pMat);
                scene.add(particles);

                camera.position.z = 10;

                const animate = () => {
                    requestAnimationFrame(animate);
                    sphere.rotation.y += 0.002;
                    sphere.rotation.x += 0.001;
                    particles.rotation.y -= 0.001;

                    // Mouse parallax could go here
                    renderer.render(scene, camera);
                };
                animate();

                window.addEventListener('resize', () => {
                    camera.aspect = container.clientWidth / container.clientHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(container.clientWidth, container.clientHeight);
                });
            },

            initChart: function () {
                const ctx = document.getElementById('trafficChart').getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['1', '2', '3', '4', '5', '6', '7'],
                        datasets: [{
                            data: [65, 59, 80, 81, 56, 55, 40],
                            borderColor: '#C5A059',
                            tension: 0.4,
                            pointRadius: 0,
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: { x: { display: false }, y: { display: false } }
                    }
                });
            },

            initMatrix: function (elementId, fontSize, color) {
                const canvas = document.getElementById(elementId);
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                let width = canvas.width = canvas.offsetWidth;
                let height = canvas.height = canvas.offsetHeight;

                const cols = Math.floor(width / fontSize);
                const ypos = Array(cols).fill(0);

                const matrixStep = () => {
                    ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                    ctx.fillRect(0, 0, width, height);
                    ctx.fillStyle = color;
                    ctx.font = fontSize + 'px monospace';

                    ypos.forEach((y, ind) => {
                        const text = String.fromCharCode(Math.random() * 128);
                        const x = ind * fontSize;
                        ctx.fillText(text, x, y);
                        if (y > height && Math.random() > 0.975) ypos[ind] = 0;
                        else ypos[ind] = y + fontSize;
                    });

                    requestAnimationFrame(matrixStep);
                };
                matrixStep();

                // Handle resize
                window.addEventListener('resize', () => {
                    width = canvas.width = canvas.offsetWidth;
                    height = canvas.height = canvas.offsetHeight;
                });
            }
        };

        window.addEventListener('DOMContentLoaded', () => app.init());
    </script>
</body>

</html>